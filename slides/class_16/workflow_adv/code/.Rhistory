############################################# Importar datos #################################################
# Set working directory
getwd()
setwd(dirdata)
getwd()
essdata <- read_dta("ESS8_subset.dta"); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
#################### Basic data analysis  ####################
# descriptives
filename <- paste0(dirresults,"table_des1.tex")
essdata_sub %>% group_by(cntry) %>%
dplyr::summarise(across(c("eisced", "age"), list(mean= ~ mean(.x, na.rm=T), sd= ~ sd(.x, na.rm=T)) )) %>%
as.data.frame() %>%
xtable() %>%
print(file=filename)
essdata_sub %>% pivot_wider(names_from=cntry, values_from=c(eisced,age)) %>%
select(eisced_BE:age_SI) %>%
as.data.frame() %>%
stargazer(type = 'tex')
#################### Plots  ####################
jitter <- position_jitter(width = 0.2, height = 0.2)
essdata_sub %>% filter(age>30) %>% ggplot(aes(x=age, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.35, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis_d() +
labs(x="edad", y="educación", colour="genero")
#################### Basic data analysis  ####################
# descriptives
filename <- paste0(dirresults,"table_des1.tex")
essdata_sub %>% group_by(cntry) %>%
dplyr::summarise(across(c("eisced", "age"), list(mean= ~ mean(.x, na.rm=T), sd= ~ sd(.x, na.rm=T)) )) %>%
as.data.frame() %>%
xtable() %>%
print(file=filename)
essdata_sub %>% pivot_wider(names_from=cntry, values_from=c(eisced,age)) %>%
select(eisced_BE:age_SI) %>%
as.data.frame() %>%
stargazer(type = 'tex')
#################### Plots  ####################
jitter <- position_jitter(width = 0.2, height = 0.2)
essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.35, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis_d() +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
#################### Basic data analysis  ####################
# descriptives
filename <- paste0(dirresults,"table_des1.tex")
essdata_sub %>% group_by(cntry) %>%
dplyr::summarise(across(c("eisced", "age"), list(mean= ~ mean(.x, na.rm=T), sd= ~ sd(.x, na.rm=T)) )) %>%
as.data.frame() %>%
xtable() %>%
print(file=filename)
essdata_sub %>% pivot_wider(names_from=cntry, values_from=c(eisced,age)) %>%
select(eisced_BE:age_SI) %>%
as.data.frame() %>%
stargazer(type = 'tex')
#################### Plots  ####################
jitter <- position_jitter(width = 0.3, height = 0.3)
essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.05, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis_d() +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
jitter <- position_jitter(width = 0.3, height = 0.3)
essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.05, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis_d() +
theme_bw() +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
jitter <- position_jitter(width = 0.3, height = 0.3)
mi_figura <- essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.05, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis_d() +
theme_bw() +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
ggsave("mi_figura.pdf", mi_figura, width = 20, height = 20, units = "cm")
jitter <- position_jitter(width = 0.3, height = 0.3)
mi_figura <- essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.05, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis_d() +
theme_bw() +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
filename <- paste0(dirresults,"mi_figura.pdf")
ggsave(filename, mi_figura, width = 20, height = 20, units = "cm")
jitter <- position_jitter(width = 1, height = 0.5)
mi_figura <- essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.05, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis_d() +
theme_bw() +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
filename <- paste0(dirresults,"mi_figura.pdf")
ggsave(filename, mi_figura, width = 25, height = 20, units = "cm")
jitter <- position_jitter(width = 1, height = 0.5)
mi_figura <- essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.05, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis_d() +
theme_bw(option="magma") +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
filename <- paste0(dirresults,"mi_figura.pdf")
ggsave(filename, mi_figura, width = 25, height = 20, units = "cm")
jitter <- position_jitter(width = 1, height = 0.5)
mi_figura <- essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.05, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis_d() +
theme_bw(option="magma") +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
filename <- paste0(dirresults,"mi_figura.pdf")
ggsave(filename, mi_figura, width = 25, height = 20, units = "cm")
jitter <- position_jitter(width = 1, height = 0.5)
mi_figura <- essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.05, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis(discrete=TRUE, option="magma") +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
filename <- paste0(dirresults,"mi_figura.pdf")
ggsave(filename, mi_figura, width = 25, height = 20, units = "cm")
jitter <- position_jitter(width = 1, height = 0.5)
mi_figura <- essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.05, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis(discrete=TRUE, option="plasma") +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
filename <- paste0(dirresults,"mi_figura.pdf")
ggsave(filename, mi_figura, width = 25, height = 20, units = "cm")
jitter <- position_jitter(width = 1, height = 0.5)
mi_figura <- essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.1, position = jitter) +
geom_smooth(method="lm",se=F) +
facet_wrap( . ~ cntry ) +
scale_color_viridis(discrete=TRUE, option="plasma") +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
filename <- paste0(dirresults,"mi_figura.pdf")
ggsave(filename, mi_figura, width = 25, height = 20, units = "cm")
################################################## Preámbulo #################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("haven")
library("tidyverse")
library("stargazer")
library("knitr")
library("viridis")
library("xtable")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2020_2_data_analysis_r/repo/slides/class_16/workflow_adv/"
dircode     <- paste0(folder,"code/")
dirdata       <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
getwd()
setwd(dirdata)
getwd()
essdata <- read_dta("ESS8_subset.dta"); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
############################################## Data analysis #################################################
# Set working directory
setwd(dircode)
source("4_analyses.R")
jitter <- position_jitter(width = 1, height = 0.5)
mi_figura <- essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.1, position = jitter) +
geom_smooth(method="lm",se=F) +
scale_color_viridis(discrete=TRUE, option="plasma") +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
filename <- paste0(dirresults,"mi_figura.pdf")
ggsave(filename, mi_figura, width = 25, height = 20, units = "cm")
mi_figura
jitter <- position_jitter(width = 1, height = 0.5)
mi_figura <- essdata_sub %>% filter(age>30) %>% ggplot(aes(x=yrbrn, y=eisced, colour=gndr_string)) +
geom_point(alpha=0.2, position = jitter) +
geom_smooth(method="lm",se=F) +
scale_color_viridis(discrete=TRUE, option="plasma") +
labs(x="año de nacimento", y="máxima educación alcanzada", colour="genero")
filename <- paste0(dirresults,"mi_figura.pdf")
ggsave(filename, mi_figura, width = 25, height = 20, units = "cm")
mi_figura
################################################## Preámbulo #################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("haven")
library("tidyverse")
library("stargazer")
library("knitr")
library("viridis")
library("xtable")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2020_2_data_analysis_r/repo/slides/class_16/workflow_adv/"
dircode     <- paste0(folder,"code/")
dirdata       <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
getwd()
setwd(dirdata)
getwd()
essdata <- read_dta("ESS8_subset.dta"); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
############################################## Data analysis #################################################
# Set working directory
setwd(dircode)
source("4_analyses.R")
################################################## Preámbulo #################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("haven")
library("tidyverse")
library("stargazer")
library("knitr")
library("viridis")
library("xtable")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2020_2_data_analysis_r/repo/slides/class_16/workflow_adv/"
dircode     <- paste0(folder,"code/")
dirdata       <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
getwd()
setwd(dirdata)
getwd()
essdata <- read_dta("ESS8_subset.dta"); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
############################################## Data analysis #################################################
# Set working directory
setwd(dircode)
source("4_analyses.R")
essdata_sub %>% pivot_wider(names_from=cntry, values_from=c(eisced,age)) %>%
select(eisced_BE:age_SI) %>%
as.data.frame() %>%
stargazer(type = 'tex')
paises <- unique(essdata_sub$cntry)
paises
################################################## Preámbulo #################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("haven")
library("tidyverse")
library("stargazer")
library("knitr")
library("viridis")
library("xtable")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2020_2_data_analysis_r/repo/slides/class_16/workflow_adv/"
dircode     <- paste0(folder,"code/")
dirdata       <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
getwd()
setwd(dirdata)
getwd()
essdata <- read_dta("ESS8_subset.dta"); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
############################################## Data analysis #################################################
setwd(dircode)
source("4_analyses.R")
# Análisis por país
paises <- unique(essdata_sub$cntry)
for (i in paises) {
essdata_sub_cntry <- essdata_sub %<% filter(cntry == i)
setwd(dircode)
source("5_analyses_bycountry.R")
}
################################################## Preámbulo #################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("haven")
library("tidyverse")
library("stargazer")
library("knitr")
library("viridis")
library("xtable")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2020_2_data_analysis_r/repo/slides/class_16/workflow_adv/"
dircode     <- paste0(folder,"code/")
dirdata       <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
getwd()
setwd(dirdata)
getwd()
essdata <- read_dta("ESS8_subset.dta"); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
############################################## Data analysis #################################################
setwd(dircode)
source("4_analyses.R")
# Análisis por país
paises <- unique(essdata_sub$cntry)
for (i in paises) {
essdata_sub_cntry <- essdata_sub %>% filter(cntry == i)
setwd(dircode)
source("5_analyses_bycountry.R")
}
################################################## Preámbulo #################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("haven")
library("tidyverse")
library("stargazer")
library("knitr")
library("viridis")
library("xtable")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2020_2_data_analysis_r/repo/slides/class_16/workflow_adv/"
dircode     <- paste0(folder,"code/")
dirdata       <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
getwd()
setwd(dirdata)
getwd()
essdata <- read_dta("ESS8_subset.dta"); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
############################################## Data analysis #################################################
setwd(dircode)
source("4_analyses.R")
# Análisis por país
paises <- unique(essdata_sub$cntry)
for (i in paises) {
essdata_sub_cntry <- essdata_sub %>% filter(cntry == i)
setwd(dircode)
source("5_analyses_bycountry.R")
}
################################################## Preámbulo #################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("haven")
library("tidyverse")
library("stargazer")
library("knitr")
library("viridis")
library("xtable")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2020_2_data_analysis_r/repo/slides/class_16/workflow_adv/"
dircode     <- paste0(folder,"code/")
dirdata       <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
getwd()
setwd(dirdata)
getwd()
essdata <- read_dta("ESS8_subset.dta"); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
############################################## Data analysis #################################################
setwd(dircode)
source("4_analyses.R")
# Análisis por país
paises <- unique(essdata_sub$cntry)
for (i in paises) {
cat("================ ANÁLISIS DATOS ",i, " ==================") # Debugging flags
essdata_sub_cntry <- essdata_sub %>% filter(cntry == i)
setwd(dircode)
source("5_analyses_bycountry.R")
}
################################################## Preámbulo #################################################
# Limpiar pantalla y remover objetos existentes
cat("\014")
rm(list = ls())
# Carga paquetes
library("haven")
library("tidyverse")
library("stargazer")
library("knitr")
library("viridis")
library("xtable")
################################################# Directorios #################################################
# Change the line below to set your own working directory
folder <- "/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2020_2_data_analysis_r/repo/slides/class_16/workflow_adv/"
dircode     <- paste0(folder,"code/")
dirdata       <- paste0(folder,"data/")
dirresults  <- paste0(folder,"results/");  dirresults
############################################# Importar datos #################################################
# Set working directory
getwd()
setwd(dirdata)
getwd()
essdata <- read_dta("ESS8_subset.dta"); essdata
########################################## Exploración de datos ##############################################
# Llama otro R script que contiene análisis.
# Organizar el trabajo de esta manera permite que el código sea más legible y manejable.
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("2_exploration.R")
############################################ Recodificación #################################################
# Establece el directorio de trabajo correspondiente
setwd(dircode)
source("3_recoding.R")
############################################## Data analysis #################################################
setwd(dircode)
source("4_analyses.R")
# Análisis por país
paises <- unique(essdata_sub$cntry)
for (i in paises) {
cat("================ ANÁLISIS DATOS ",i, " ==================") # Debugging flags
essdata_sub_cntry <- essdata_sub %>% filter(cntry == i)
setwd(dircode)
source("5_analyses_bycountry.R")
}
