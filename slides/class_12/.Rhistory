library("tidyverse")
library("wesanderson")
library("cowplot")
library("lubridate")
library("viridis")
setwd(
"~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2020_2_data_analysis_r/repo/slides/class_12/")
covid_data <- read_delim("covid_data.csv", delim=";")
View(covid_data)
as.Date("2020-11-17")
covid_data %>% filter(date==as.Date("2020-11-17"))
covid_data <- covid_data %>% filter(date==as.Date("2020-11-17"))
covid_data  %>% glimpse()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand))
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand)) +
geom_point()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand)) +
geom_point(alpha=0.3)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand)) %>%
geom_point(alpha=0.3)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand))
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand)) +
geom_point(alpha=0.3)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data  %>% glimpse()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, colour=female_smokers)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, colour=female_smokers)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, colour=gdp_per_capita)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="a", colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group=" ", colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group=3, colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
))
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_bw()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_cowplot()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_cowplot()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_map()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "none")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "bottom")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data  %>% glimpse()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=median_age)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=median_age)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
scale_color_viridis()
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=median_age)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
scale_color_viridis(option = "plasma")
pal <- wes_palette("Zissou1", 100, type = "continuous")
pal
pal
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=median_age)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
#scale_color_viridis(option = "plasma")
scale_color_gradientn(colours = pal)
pal <- wes_palette("Darjeeling1", 100, type = "continuous")
pal
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=median_age)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
#scale_color_viridis(option = "plasma")
scale_color_gradientn(colours = pal)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
#scale_color_viridis(option = "plasma")
scale_color_gradientn(colours = pal)
?wes_palette
pal <- wes_palette("Darjeeling1", 100, type = "discrete")
pal <- wes_palette("Darjeeling1", 6, type = "discrete")
pal <- wes_palette("Darjeeling1", 5, type = "discrete")
pal
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
#scale_color_viridis(option = "plasma")
scale_color_gradientn(colours = pal)
pal <- wes_palette("IsleofDogs1", 6, type = "discrete")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
scale_color_manual(values = wes_palette("IsleofDogs1"))
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
scale_color_manual(values = wes_palette("Royal1"))
pal <- wes_palette("Rushmore1", 100, type = "discrete")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
scale_color_viridis(option = "plasma")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=continent)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
scale_color_manual(values =c("red","blue","purple","black","yellow","pink"))
pal <- wes_palette("Rushmore1", 100, type = "discrete")
pal <- wes_palette("Rushmore1", 100, type = "discrete")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand, group="hello", colour=median_age)) +
geom_point() +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
scale_color_gradientn(colours = pal)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "bottom")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "bottom") +
scale_color_viridis(option = "plasma")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "bottom") +
scale_color_viridis_c(option = "plasma")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "bottom") +
scale_color_viridis_d(option = "plasma")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "bottom") +
scale_color_viridis(option = "plasma", discrete = TRUE)
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "bottom") +
scale_color_viridis(option = "plasma", discrete = TRUE, reverse =T )
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "bottom") +
scale_color_viridis(option = "plasma", discrete = TRUE, direction = -1)
covid_data %>% ggplot(aes(y=total_deaths_per_million, x=gdp_per_capita))
covid_data %>% ggplot(aes(y=total_deaths_per_million, x=gdp_per_capita)) +
scale_x_log10() + scale_y_log10()
covid_data %>% ggplot(aes(y=total_deaths_per_million, x=gdp_per_capita)) +
scale_x_log10() + scale_y_log10() +
geom_density_2d_filled()
covid_data %>% ggplot(aes(y=total_deaths_per_million, x=gdp_per_capita)) +
scale_x_log10() + scale_y_log10() +
geom_density_2d_filled() +
labs(title="Grafico de densidad",  x="GDP per cápita", y="muertes totales por millón hbs.")
p <- covid_data %>% ggplot(aes(y=total_deaths_per_million, x=gdp_per_capita)) +
scale_x_log10() + scale_y_log10() +
geom_density_2d_filled() +
labs(title="Grafico de densidad",  x="GDP per cápita", y="muertes totales por millón hbs.")
p
p + theme_bw()
p <- p + theme_bw()
p
p
ggsave("miprimerggplot.pdf", p, width = 20, height = 20, units = "cm")
covid_data %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "bottom") +
scale_color_viridis(option = "plasma", discrete = TRUE, direction = -1)
covid_data %>% filter(continent!="Oceania")  %>% ggplot(aes(y=total_deaths_per_million,
x=hospital_beds_per_thousand,
group=continent,
colour=continent
)) +
geom_point(alpha=0.3) +
scale_x_log10() + scale_y_log10() +
geom_smooth(method = "lm", se=F) +
labs(x="Camas de hospital por mil hbs.", y="muertes totales por millón hbs.", colour="continente") +
facet_wrap(continent ~ .) +
theme_dark() +
theme(legend.position = "bottom") +
scale_color_viridis(option = "plasma", discrete = TRUE, direction = -1)
